<!DOCTYPE html>
<html>
  <head>
      <meta charset="utf-8" />
      <title>Example</title>
			<style>
				.canvas {
          width: 100%;
          height: 70vh;
        }
			</style>
      <script type="module">
				import WebGLplot, { WebglLine, ColorRGBA } from "./node_modules/webgl-plot/dist/webglplot.module.js";
				import { logistic } from "./fun.js";
        let k = 0;

        document.addEventListener("DOMContentLoaded", render);
        
        function render() {
          const canv = document.getElementById("my_canvas");
          
          const devicePixelRatio = window.devicePixelRatio || 1;
          const numX = Math.round(canv.clientWidth * devicePixelRatio);
          
          const color = new ColorRGBA(Math.random(), Math.random(), Math.random(), 1);
          
          const line = new WebglLine(color, numX/2);
          
          const wglp = new WebGLplot(canv);
          
          wglp.addLine(line);
          console.log(line);
          
          function newFrame() {
            update();
            wglp.update();
            window.requestAnimationFrame(newFrame);
          }
          window.requestAnimationFrame(newFrame);
          
          function update() {
            const fact = 1 / line.numPoints;
            let x = 0;

            for(let i = 0; i < line.numPoints; i++) {
              x += fact; 
              line.setX(i, x);
              
              const y = logistic(x, k);
              line.setY(i, y);
            }
          }
        }
      
        document.querySelector("input").addEventListener("input", evt => {
          k = evt.target.value/100;
          console.log(k);
        });

      </script>
  </head>
  <body>
    <div>
      <canvas class="canvas" id="my_canvas"></canvas>
      <input type="range" min="-99" max="99" value="0" class="slider" id="myRange">
    </div>
  </body>
</html>
